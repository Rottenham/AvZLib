# AvZ TickPlanter 智能种植操作类 220605

## 简介

针对生存无尽模式开局等游戏模式玩法设计的智能种植操作类，支持连续种植、分先后的连续种植、铲除再种植等智能种植操作。
### 关键词
recoverCard recoverPlant  智能种植 连续种植 TickRunner

## 运行环境

本插件针对 AvZ 220213 版本开发，不确保对其它 AvZ 版本的兼容性。

## 使用方法
将 tick_planter.h 置于 AsmVsZombies/inc 目录后，编写脚本并运行即可。

在 Script() 外添加下面的代码以在编译时包含此库:
```c++
#include "tick_planter.h"
```

在 Script() 开头添加下面的代码以启用 tick_planter:
```c++
tick_planter.start();
```

## 原理

TickPlanter是TickRunner的子类，由保存**种植信息**的队列和**遍历尝试执行**此队列的**种植函数**组成。种植信息包括**种子类型**、**种植位置**和**种植失败时的处理方式**。种植函数定期遍历尝试执行种植信息队列，如果**种植成功**，则**删除**此种植信息；如果失败，则根据**种植失败时的处理方式**形成以下几种**种植策略**：
### 种植(Plant)
删除此种植信息，即如果此次种植失败，则不会再尝试。
### 连续种植(delayPlant)
保留此种植信息，即下次遍历执行时仍会尝试此种植。
### 优先种植(waitPlant)
保留此种植信息并结束本次遍历，即当且仅当此种植成功后才会尝试其他种植。
### 铲除种植(shovelPlant)
当且仅当因为种植位置被占用而种植失败时，铲除占位的植物并再次尝试此种植，如果仍失败，保留此种植信息。

种植函数会先遍历“优先种植”型种植信息，再遍历其他型种植信息，即”优先种植”型种植较其他型优先级高，其他型种植优先级相同。在”优先种植“型种植中，先加入的种植较后加入的种植优先级高。

## 性能分析

【待完善】